<!DOCTYPE html>
<html>
<head>
    <title>SuchBlue's website</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="universal.css">
    <link rel="stylesheet" href="particles.css">
    <link rel="icon" href="images/profile.png">
</head>
<body>
    <div id="particle-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <noscript>sorry, you must enable javascript to get server stats :(</noscript><div></div>
    <a href="https://open.spotify.com/playlist/2lmdpqZb5ymcQ5D2XDyAzw" id="music">ðŸŽµ <u>music i listen to</u> ðŸŽµ</a>
        <div class="header">
            <img src="images/profile.png" />
            <h1>SuchBlue</h1>
                <div style="clear: both;"></div>
    </div>

    <div class="center">
        <u>Server stats</u>
        <h4 id="status"></h4>
        <h4 id="cpuinfo"></h4>
        <h4 id="raminfo"></h4>
        <div id="connections" class="head">
            <a href="https://github.com/SuchBlue/"><img src="images/github.png"></a>
            <a href="https://youtube.com/SuchBlue/"><img src="images/youtube.png"></a>
        </div>
        <div class="multiple">
            <img src="images/discord.jpg" style="height: 35px;" />
            <h5>SuchBlue#1337</h5>
                <div style="clear: both;"></div>
        </div>
    </div>

    <footer>
        Made with love from SuchBlue - See source at
        <a href="https://github.com/SuchBlue/such.blue" style="color: inherit;">https://github.com/SuchBlue/such.blue</a>
        <div>Any suggestions? Submit an issue or pull request to contribute to this site!</div>
    </footer>
    
    <script type="application/javascript">
        function load() {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function () {
                const responseJSON = JSON.parse(this.responseText
                        .replace('"system.cpu"', '"systemcpu"')
                        .replace('"system.ram"', '"systemram"'));
                    
                const cpuUsage = responseJSON.systemcpu.dimensions.user.value + responseJSON.systemcpu.dimensions.system.value;

                const totalRam = responseJSON.systemram.dimensions.used.value
                    + responseJSON.systemram.dimensions.free.value
                    + responseJSON.systemram.dimensions.cached.value
                    + responseJSON.systemram.dimensions.buffers.value;
                    
                const ramUsage = responseJSON.systemram.dimensions.used.value;
                document.getElementById("cpuinfo").innerText = `CPU: ${Math.round(cpuUsage * 100) / 100}%`;
                document.getElementById("raminfo").innerText = `RAM: ${Math.round((ramUsage / totalRam) * 10000) / 100}%`;   
            }
            xhttp.open("GET", "https://home.such.blue/netdata/api/v1/allmetrics?format=json");
            xhttp.onreadystatechange = () => {
                if (xhttp.readyState !== 4) {
                    return;
                }
                if (xhttp.status === 200) {
                    document.getElementById("status").innerText = "Status: Online";
                } else {
                    document.getElementById("status").innerText = "Status: Offline";
                }
            };
            xhttp.send();
        }
        load();
        setInterval(load, 10000);
    </script>

    <!-- credits to https://codepen.io/tutsplus/pen/MrjYJK for the particle animations !-->
</body>
</html>
